#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

#define TABLE_SIZE 101
#define NUM_KEYS 1000

int divisionHash(int key) {
    return key % TABLE_SIZE;
}

int multiplicationHash(int key) {
    double A = 0.618033;
    double frac = key * A;
    frac = frac - (int)frac;
    return (int)(TABLE_SIZE * frac);
}

int stringHash(char *str) {
    int hash = 0;
    for (int i = 0; str[i] != '\0'; i++)
        hash = (hash * 31 + str[i]) % TABLE_SIZE;
    return hash;
}

void analyze(int table[]) {
    int min = table[0], max = table[0], sum = 0;
    for (int i = 0; i < TABLE_SIZE; i++) {
        if (table[i] < min) min = table[i];
        if (table[i] > max) max = table[i];
        sum += table[i];
    }
    printf("Min: %d  Max: %d  Avg: %.2f\n", min, max, (double)sum / TABLE_SIZE);
}

int main() {
    int divTable[TABLE_SIZE] = {0};
    int mulTable[TABLE_SIZE] = {0};
    int strTable[TABLE_SIZE] = {0};

    srand(time(NULL));

    for (int i = 0; i < NUM_KEYS; i++) {
        int key = rand() % 100000;
        divTable[divisionHash(key)]++;
        mulTable[multiplicationHash(key)]++;
    }

    char strings[NUM_KEYS][10];
    for (int i = 0; i < NUM_KEYS; i++) {
        for (int j = 0; j < 9; j++)
            strings[i][j] = 'a' + rand() % 26;
        strings[i][9] = '\0';
        strTable[stringHash(strings[i])]++;
    }

    printf("Division Hash Distribution:\n");
    analyze(divTable);

    printf("Multiplication Hash Distribution:\n");
    analyze(mulTable);

    printf("String Hash Distribution:\n");
    analyze(strTable);

    return 0;
}
